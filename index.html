<!doctype html>
<html lang="ru">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Эвакуатор СПб — заказ эвакуатора онлайн</title>
    <meta name="description" content="Закажите эвакуатор в Санкт-Петербурге за 2 минуты: отметьте маршрут на карте, получите расчет цены и отправьте заявку.">
    <link rel="stylesheet" href="./style.css">
    <script src="https://api-maps.yandex.ru/2.1/?apikey=2a369c71-037c-4dfb-b260-d72cc8f09a38&lang=ru_RU" type="text/javascript"></script>
  </head>
  <body>
    <div class="container">
      <header class="header">
        <h1>Эвакуатор СПб — быстро, надежно, по фиксированной ставке</h1>
        <p>Закажите эвакуатор за 2 минуты — без скрытых платежей</p>
      </header>

      <main>
        <form id="order-form" class="order-form" novalidate>
          <div class="form-row">
            <label for="name">Имя</label>
            <input type="text" id="name" required placeholder="Ваше имя" autocomplete="name">
          </div>

          <div class="form-row">
            <label for="phone">Телефон</label>
            <input type="tel" id="phone" required placeholder="Ваш телефон" inputmode="tel" autocomplete="tel">
          </div>

          <div class="form-row">
            <label for="pickup-address">Адрес забора</label>
            <textarea id="pickup-address" rows="2" placeholder="Кликните на карту или введите адрес" required></textarea>
          </div>

          <div class="form-row">
            <label for="dropoff-address">Адрес доставки</label>
            <textarea id="dropoff-address" rows="2" placeholder="Кликните на карту или введите адрес" required></textarea>
          </div>

          <input type="hidden" id="distance" value="0">

          <div class="checkboxes">
            <label class="checkbox">
              <input type="checkbox" id="is-running">
              <span>Машина на ходу</span>
            </label>
            <label class="checkbox">
              <input type="checkbox" id="has-docs">
              <span>Есть документы</span>
            </label>
            <label class="checkbox">
              <input type="checkbox" id="can-winch">
              <span>Можно подцепить лебедкой</span>
            </label>
          </div>

          <div class="form-row">
            <label for="vehicle-type">Тип ТС</label>
            <select id="vehicle-type" required>
              <option>Автомобиль</option>
              <option>Мотоцикл</option>
              <option>Автобус</option>
              <option>Фура</option>
            </select>
          </div>

          <div class="form-row">
            <label for="vehicle-brand">Марка машины</label>
            <input type="text" id="vehicle-brand" placeholder="Например, Toyota Camry">
          </div>

          <div class="form-row">
            <label for="comment">Комментарий</label>
            <textarea id="comment" rows="3" placeholder="Дополнительная информация для водителя"></textarea>
          </div>

          <div id="price-preview" style="font-size: 18px; font-weight: bold; margin: 15px 0; color: #1E3A8A;">Средняя стоимость: 2000 ₽</div>
          <p style="font-size: 14px; color: #666;">*Итоговая цена может отличаться — водитель уточнит по телефону</p>

          <button id="submit-order" type="button" style="padding: 12px 30px; background: #1E3A8A; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 16px; width: 100%;">Отправить заявку</button>

          <button id="my-orders-btn" type="button" style="margin-top: 20px; padding: 10px; background: #F97316; color: white; border: none; border-radius: 6px; cursor: pointer;">Мои заказы</button>
        </form>

        <div id="map" style="width: 100%; height: 350px; margin: 20px 0; position: relative; border: 1px solid #ddd; border-radius: 8px;">
          <div id="map-loading" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(255,255,255,0.9); display: flex; align-items: center; justify-content: center; font-size: 18px; color: #555; z-index: 10;">
            Загрузка карты...
          </div>
        </div>
        <button id="clear-map" type="button" style="margin: 10px 0; padding: 10px 20px; background: #F97316; color: white; border: none; border-radius: 6px; cursor: pointer; width: 100%;">Очистить карту</button>
      </main>

      <footer class="footer">
        <p>© 2025 Эвакуатор СПб. Быстро и прозрачно.</p>
      </footer>
    </div>

    <div id="orders-modal" class="modal" aria-hidden="true">
      <div class="modal__backdrop" data-close-modal></div>
      <div class="modal__content" role="dialog" aria-modal="true" aria-labelledby="orders-modal-title">
        <div class="modal__header">
          <h2 id="orders-modal-title">Мои заказы</h2>
          <button class="modal__close" type="button" data-close-modal aria-label="Закрыть">×</button>
        </div>
        <div class="modal__body">
          <div class="form-row">
            <label for="orders-phone-input">Ваш телефон</label>
            <input type="tel" id="orders-phone-input" placeholder="Введите телефон">
          </div>
          <button id="orders-show-btn" class="btn btn-primary" type="button">Показать</button>

          <div id="orders-empty" class="muted" style="display:none; margin-top: 12px;">Заявок не найдено.</div>

          <div class="table-wrapper" style="margin-top: 16px;">
            <table id="orders-table" class="table" aria-live="polite">
              <thead>
                <tr>
                  <th>Дата</th>
                  <th>Марка</th>
                  <th>Статус</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <script src="./script.js" defer></script>
  </body>
  </html>

