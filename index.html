<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Эвакуатор СПб — заказ эвакуатора онлайн</title>
  <link rel="stylesheet" href="./style.css">
  <script src="https://api-maps.yandex.ru/2.1/?apikey=ЗАМЕНИ_МЕНЯ_НА_РЕАЛЬНЫЙ_КЛЮЧ&lang=ru_RU" type="text/javascript"></script>
  <script defer src="./script.js"></script>
</head>
<body data-page="index">
  <header class="container">
    <h1>Эвакуатор СПб — быстро, надежно, по фиксированной ставке</h1>
    <p class="subtitle">Закажите эвакуатор за 2 минуты — без скрытых платежей</p>
  </header>

  <main class="container">
    <section class="card">
      <div class="card-header">
        <h2>Оформление заявки</h2>
        <div class="header-actions">
          <button id="my-orders-btn" class="btn btn-outline">Мои заказы</button>
          <a href="./admin.html" class="btn btn-link">Админ-панель</a>
        </div>
      </div>

      <form id="order-form" class="grid">
        <div class="form-group">
          <label for="name">Имя</label>
          <input type="text" id="name" required placeholder="Иван">
        </div>

        <div class="form-group">
          <label for="phone">Телефон</label>
          <input type="tel" id="phone" required placeholder="+7 900 000-00-00">
          <small class="hint">Только цифры, 10–11 символов</small>
        </div>

        <div class="form-group form-group-full">
          <label for="pickup-address">Адрес забора</label>
          <textarea id="pickup-address" required placeholder="Нажмите на карту или введите адрес"></textarea>
        </div>

        <div class="form-group form-group-full">
          <label for="dropoff-address">Адрес доставки</label>
          <textarea id="dropoff-address" required placeholder="Нажмите на карту или введите адрес"></textarea>
        </div>

        <input type="hidden" id="distance" value="0">

        <div class="form-group toggles form-group-full">
          <label class="checkbox">
            <input type="checkbox" id="is-running">
            <span>Машина на ходу</span>
          </label>
          <label class="checkbox">
            <input type="checkbox" id="has-docs">
            <span>Есть документы</span>
          </label>
          <label class="checkbox">
            <input type="checkbox" id="can-winch">
            <span>Можно подцепить лебедкой</span>
          </label>
        </div>

        <div class="form-group">
          <label for="vehicle-type">Тип ТС</label>
          <select id="vehicle-type">
            <option>Автомобиль</option>
            <option>Мотоцикл</option>
            <option>Автобус</option>
            <option>Фура</option>
          </select>
        </div>

        <div class="form-group">
          <label for="vehicle-brand">Марка и модель</label>
          <input type="text" id="vehicle-brand" placeholder="Например: Toyota Camry">
        </div>

        <div class="form-group form-group-full">
          <label for="comment">Комментарий</label>
          <textarea id="comment" placeholder="Например: колеса заблокированы, нужен манипулятор"></textarea>
        </div>

        <div class="form-group form-group-full">
          <div id="price-preview" class="price-preview">Средняя стоимость: 2000 ₽</div>
          <p class="price-note">*Итоговая цена может отличаться — водитель уточнит по телефону</p>
        </div>

        <div class="form-actions form-group-full">
          <button id="submit-order" type="submit" class="btn btn-primary">Отправить заявку</button>
        </div>
      </form>
    </section>

    <section class="card">
      <h2>Маршрут на карте</h2>
      <div id="map" style="width: 100%; height: 400px; margin: 20px 0; position: relative; border: 1px solid #ddd; border-radius: 8px;">
        <div id="map-loading" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(255,255,255,0.9); display: flex; align-items: center; justify-content: center; font-size: 18px; color: #555; z-index: 10;">
          Загрузка карты...
        </div>
      </div>
      <button id="clear-map" class="btn btn-accent" style="margin: 10px 0; padding: 10px 20px; background: #F97316; color: white; border: none; border-radius: 6px; cursor: pointer;">Очистить карту</button>
    </section>
  </main>

  <div id="orders-modal" class="modal" aria-hidden="true">
    <div class="modal-backdrop" data-close="modal"></div>
    <div class="modal-content">
      <div class="modal-header">
        <h3>Мои заказы</h3>
        <button class="icon-button" title="Закрыть" data-close="modal">✕</button>
      </div>
      <div class="modal-body">
        <div class="orders-lookup">
          <label for="orders-phone-input">Введите номер телефона</label>
          <div class="inline-group">
            <input type="tel" id="orders-phone-input" placeholder="Например: 9000000000">
            <button id="orders-fetch" class="btn btn-primary">Показать</button>
          </div>
          <small class="hint">Мы покажем заявки, найденные по этому номеру.</small>
        </div>
        <div id="orders-result" class="orders-result">
          <table class="table" id="orders-table">
            <thead>
              <tr>
                <th>№</th>
                <th>Дата</th>
                <th>Марка</th>
                <th>Статус</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
          <div id="orders-empty" class="empty" style="display:none">Заявок не найдено</div>
        </div>
      </div>
    </div>
  </div>

  <footer class="container footer">
    <p>© <span id="year"></span> Эвакуатор СПб. Все права защищены.</p>
  </footer>
</body>
</html>

